<h1>Latihan Pertemuan 003</h1>

<ol>
<ul>Membuat akun di Heroku.com</ul>
<img src=lat/heroku5.png>
<ul>Membuat aplikasi baru memalui dashboard</ul>
<img src=lat/createnewapp.png>
<ul>Install Python versi 3.7</ul>
<img src=lat/python.png>
</ol>
<h1>Getting Started on Heroku with Python</h1>
This tutorial will have you deploying a Python app (a simple Django app) in minutes.

Hang on for a few more minutes to learn how it all works, so you can make the most out of Heroku.
<h3>Set up</h3>
Download aplikasi heroku, agar dapat digunakan lokal (menggunakan CMD). You use the CLI to manage and scale your applications, provision add-ons, view your application logs, and run your application locally.
<img src=lat/cliheroku.png>
<br>
Use the heroku login command to log in to the Heroku CLI:
<img src=lat/login.png>
<h3>Prepare the app</h3>
In this step, you will prepare a simple application that can be deployed.

To clone the sample application so that you have a local version of the code that you can then deploy to Heroku, execute the following commands in your local command shell or terminal:
<img src=lat/clone.png>
<h3>Deploy the app</h3>
Create an app on Heroku, which prepares Heroku to receive your source code:
<img src=lat/Screenshot_1.png>
Now deploy your code:
<img src=lat/Screenshot_2.png>
<img src=lat/Screenshot_3.png>
The application is now deployed. Ensure that at least one instance of the app is running:
<img src=lat/Screenshot_4.png>
Now visit the app at the URL generated by its app name. As a handy shortcut, you can open the website as follows:
<img src=lat/Screenshot_5.png>
<img src=lat/Screenshot_6.png>
<h3>View logs</h3>
View information about your running app using one of the logging commands, heroku logs --tail:
<img src=lat/Screenshot_7.png>
Press Control+C to stop streaming the logs.
<h3>Define a Procfile</h3>
Use a Procfile, a text file in the root directory of your application, to explicitly declare what command should be executed to start your app.

The Procfile in the example app you deployed looks like this:
<img src=lat/procfile.png>
<h3>Scale the app</h3>
You can check how many dynos are running using the ps command:
<img src=lat/Screenshot_8.png>
<h3>Declare app dependencies</h3>
Heroku recognizes an app as a Python app by looking for key files. Including a requirements.txt in the root directory is one way for Heroku to recognize your Python app.

The demo app you deployed already has a requirements.txt, and it looks something like this:
<img src=lat/req.png>
To do this locally, you can run the following command:
<img src=lat/Screenshot_11.png>
Installing the dependencies also caused several other dependencies to be installed. You can see them by using pip’s feature list:
<img src=lat/Screenshot_12.png>
Once dependencies are installed, you will be ready to run your app locally.
<h3>Run the app locally</h3>
The app is almost ready to start locally. Django uses local assets, so first, you’ll need to run collectstatic:
<img src=lat/local.png>
Just like Heroku, heroku local examines the Procfile to determine what to run.

Open http://localhost:5000 with your web browser. You should see your app running locally.

To stop the app from running locally, go back to your terminal window and press Ctrl+C to exit.
<img src=lat/Screenshot_13.png>

<h3>Push local changes</h3>
Install requests locally:
<img src=lat/requests.png>
And then add it to your requirements.txt file:
<img src=lat/reqs.png>
Modify hello/views.py so that it imports the requests module at the start:
<img src=lat/views.png>
Now modify the index method to make use of the module. Try replacing the current index method with the following code:
<img src=lat/index.png>
Now test locally:
<img src=lat/locals.png>
Visit your application at http://localhost:5000. 
<img src=lat/Screenshot_15.png>

Now deploy. Almost every deploy to Heroku follows this same pattern. First, add the modified files to the local git repository:

$ git add .
Now commit the changes to the repository:

$ git commit -m "Demo"
Now deploy, just as you did previously:

<img src=lat/Screenshot_17.png>
Finally, check that everything is working:

$ heroku open <br>
<img src=lat/Screenshot_16.png>